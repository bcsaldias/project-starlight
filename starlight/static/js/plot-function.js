// Generated by CoffeeScript 1.10.0
var computePeriod, foldPlot, mainPlot,
  slice = [].slice;

computePeriod = function(timeseries, period) {
  var epochs;
  epochs = timeseries.map(function(time) {
    return (time % period) / period;
  });
  return epochs;
};

mainPlot = function(lcdata) {
  var config, data, layout;
  data = {
    x: lcdata.mjd,
    y: lcdata.mag,
    error_y: {
      type: 'data',
      array: lcdata.err,
      color: 'rgb(255, 217, 102)',
      width: 3,
      opacity: 0.3
    },
    mode: 'markers',
    marker: {
      color: 'rgb(255, 217, 102)',
      size: 8
    },
    type: 'scatter'
  };
  layout = {
    margin: {
      b: 25,
      l: 50,
      r: 10,
      t: 10
    },
    paper_bgcolor: 'rgba(0,0,0,0)',
    plot_bgcolor: 'rgba(0,0,0,0)',
    yaxis: {
      autorange: 'reversed',
      gridcolor: "#808080",
      gridwidth: 1,
      tickfont: {
        color: "#fff"
      }
    },
    xaxis: {
      gridcolor: "#808080",
      gridwidth: 1,
      tickfont: {
        color: "#fff"
      }
    },
    height: 350
  };
  config = {
    staticPlot: true
  };
  Plotly.newPlot('plot-main', [data], layout, config);
};

foldPlot = function(lcdata, period) {
  var config, data, layout, magnitudes, time, times, times2;
  times = computePeriod(lcdata.mjd, period);
  times2 = (function() {
    var i, len, results;
    results = [];
    for (i = 0, len = times.length; i < len; i++) {
      time = times[i];
      results.push(time - 1);
    }
    return results;
  })();
  times = slice.call(times2).concat(slice.call(times));
  magnitudes = slice.call(lcdata.mag).concat(slice.call(lcdata.mag));
  data = {
    x: times,
    y: magnitudes,
    mode: 'markers',
    marker: {
      color: 'rgb(255, 217, 102)',
      size: 6,
      opacity: 0.5
    },
    type: 'scatter'
  };
  layout = {
    margin: {
      b: 25,
      l: 50,
      r: 10,
      t: 10
    },
    paper_bgcolor: 'rgba(0,0,0,0)',
    plot_bgcolor: 'rgba(0,0,0,0)',
    yaxis: {
      autorange: 'reversed',
      gridcolor: "#808080",
      gridwidth: 1,
      tickfont: {
        color: "#fff"
      }
    },
    xaxis: {
      gridcolor: "#808080",
      gridwidth: 1,
      tickfont: {
        color: "#fff"
      }
    },
    height: 200
  };
  config = {
    staticPlot: true
  };
  Plotly.newPlot('plot-fold', [data], layout, config);
};
